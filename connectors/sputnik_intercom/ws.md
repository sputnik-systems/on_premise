# Websocket connector

Websocket коннектор представляет собой real-time communication сервис (RTC), который поддерживает связь домофона и платформы Asgard.

При выходе домофона в сеть, устройство устанавливает вебсокет-соединение с RTC-сервисом. В процессе работы, домофон обменивается с сервисом сообщениями, которые могут содержать команды для домофона, пакеты со звуком, информацию об обновлении состоянии домофона.

## Задачи RTC:

- Обмен командами между домофоном и core-частью
- Совершение звонков
- Формирование логов устройства

## Используемые метрики:

### DevicesOnline
Количество домофонов, зарегистрированных на поде. Увеличивается на единицу при установлении вебсокет-соединения и уменьшается при разрыве соединения.
### AllCalls
Счетчик общего количества звонков.
### FailedCalls
Счетчик неудавшихся звонков.
### SpeakCalls
Счетчик успешных звонков.

## Алерты:

### ManyIntercomReconnects
Информирует о большом количестве переподключений в течении 5 минут.
### NoNewStartedCalls
Информирует об отсутствии новых звонков в течении часа.
### FailedCalls
Информирует о большом количестве неудавшихся звонков за последние 5 минут.
### ManyActiveIntercoms
Информирует о большом количестве домофонов, зарегистрированных на одном поде RTC.
